# 性能测试

## 背景说明

### 机器选择
服务端：4核8g

客户端：4核8g


### 启动说明
服务端相关内容启动
1. 切换工作目录 demo/ws
2. 启动第三方依赖 make e2e_up
3. 启动mock后端服务  make mock_backend
4. 启动ws网关 make run_gateway_only


客户端相关内容准备
1. 工作目录还是 demo/ws
2. 运行客户端压测脚本 go run client/example/main.go 
3. 相关参数可以查看 demo/ws/client/example/usage.md


## 测试目的
了解websocket服务器的如下指标
1. 最大并发连接数
2. 单位时间消息吞吐量（TPS）在这个项目里，事务里就是客户端发一条数据 ws返回ack，然后客户端返回ack。
3. 系统资源占用（CPU、内存、IO）


## 压测时的变量
1. github.com/gobwas/ws包的一些参数
2. 系统的tcp相关参数
3. 系统的websocket相关参数
4. 并发连接数
5. 消息大小
6. 消息频率

## 第一次

### 修改并发连接数 每秒一条数据，一条数据100B




